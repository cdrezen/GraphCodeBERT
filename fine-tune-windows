set source=java
set target=cs
set lr=1e-4
set batch_size=32
set beam_size=10
set source_length=320
set target_length=256
set output_dir=saved_models/%source%-%target%/
set train_file=data/train.java-cs.txt.%source%,data/train.java-cs.txt.%target%
set dev_file=data/valid.java-cs.txt.%source%,data/valid.java-cs.txt.%target%
set epochs=100
set pretrained_model=microsoft/graphcodebert-base
mkdir "%output_dir%"
python run.py --do_train --do_eval --model_type roberta --source_lang %source% --model_name_or_path %pretrained_model% --tokenizer_name microsoft/graphcodebert-base --config_name microsoft/graphcodebert-base --train_filename %train_file% --dev_filename %dev_file% --output_dir %output_dir% --max_source_length %source_length% --max_target_length %target_length% --beam_size %beam_size% --train_batch_size %batch_size% --eval_batch_size %batch_size% --learning_rate %lr% --num_train_epochs %epochs% 2>&1| coreutils tee %output_dir%/train.log